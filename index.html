<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>GSAP Column Scroll Demo</title>
    <style>
      :root{--gap:32px;--left-w:26%;--bg:#0f1724;--panel-bg:#071029;--muted:#9aa4b2}
      html,body{height:100%;}
      body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;color:#e6eef6;background:linear-gradient(180deg,#071029 0%, #041322 100%);-webkit-font-smoothing:antialiased}
      main{min-height:100vh}
      .panel{min-height:100vh;box-sizing:border-box;padding:60px 8vw;color:var(--muted)}
      .panel:nth-child(odd){background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent)}
      .panel .inner{max-width:1100px;margin:0 auto}

      /* Scroll column panel */
      .panel.scroll-col{display:flex;align-items:flex-start;gap:var(--gap);padding-top:80px;padding-bottom:80px}
      .panel.scroll-col .col-left{width:var(--left-w);flex:0 0 var(--left-w);box-sizing:border-box;padding-right:16px}
      .panel.scroll-col .col-left .title{font-size:clamp(28px,4vw,48px);line-height:1.05;color:#fff;margin:0 0 8px}
      .panel.scroll-col .col-left .sub{color:var(--muted);font-size:14px}
      .panel.scroll-col .col-right {height: 100%; flex:1;min-width:0}
      .panel.scroll-col .col-right p{line-height:1.6;color:#dfe9f6;margin-bottom:18px}

      /* Simple visuals */
      h1.section-title{font-size:42px;margin:0 0 8px}
      p.lead{color:#d7e6ff;max-width:70ch}
      .panel.small{padding-top:120px;padding-bottom:120px}

      /* responsive tweaks
      @media (max-width:900px){
        .panel.scroll-col{flex-direction:column}
        .panel.scroll-col .col-left{position:relative;width:100%;flex:0 0 auto;padding-bottom:18px}
      } */
    </style>
  </head>
  <body>
    <main>
      <section class="panel small">
        <div class="inner">
          <h1 class="section-title">Panel 1</h1>
          <p class="lead">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer a arcu vitae urna faucibus pharetra. Sed id lorem eu urna scelerisque dictum. Donec et augue nec arcu pharetra laoreet.</p>
        </div>
      </section>

      <section class="panel scroll-col" id="panel-2">
        <div class="col-left">
          <h1 class="title">Section 02</h1>
          <div class="sub">Pinned heading while the right column scrolls</div>
        </div>
        <div class="col-right">
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque non sem sit amet neque feugiat dictum. Integer vitae urna vel orci feugiat luctus. Cras congue, risus nec ullamcorper tincidunt, dolor arcu gravida sem, et tristique lorem justo in nibh.</p>
          <p>Vivamus laoreet, augue ut interdum malesuada, nibh nunc faucibus nibh, a dictum nunc nisl non massa. Curabitur auctor elit id sagittis tristique. Aliquam erat volutpat. Sed pulvinar, mi vel cursus feugiat, tortor justo lacinia arcu, eu posuere lorem ipsum ut purus.</p>
          <p>Fusce id lectus tincidunt, interdum lorem vitae, placerat purus. Suspendisse at nulla sed orci vulputate facilisis. Integer in neque nisl. Ut bibendum, augue vitae egestas luctus, augue lectus interdum turpis, nec aliquam arcu orci nec tortor.</p>
          <p>Nam tincidunt, dui at pharetra volutpat, ex urna vehicula libero, vitae cursus lorem lorem sit amet mi. Integer luctus risus eget nibh gravida, vel bibendum dui facilisis. Maecenas rhoncus nunc id ipsum faucibus, ac cursus magna faucibus.</p>
          <p>Praesent mollis elit et dolor pretium, at placerat massa fermentum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Phasellus vitae mi ut justo fermentum tempus.</p>
          <p>Morbi vel semper ipsum. Donec a risus id justo gravida tincidunt. Sed auctor, est vel lacinia feugiat, arcu ipsum dictum urna, et dictum neque orci non lectus. Nunc viverra augue at nibh porttitor, et tincidunt nibh pulvinar.</p>
        </div>
      </section>

      <section class="panel scroll-col small" id="panel-3">
        <div class="col-left">
          <h1 class="title">Section 03</h1>
          <div class="sub">Pinned heading for the final section</div>
        </div>
        <div class="col-right">
          <p>A final short paragraph to finish off the demo. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
        </div>
      </section>
    </main>

    <!-- GSAP + ScrollTrigger -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script>
      // Initialize GSAP ScrollTrigger and pin left columns while right column scrolls
      gsap.registerPlugin(ScrollTrigger);

      function setupScrollCols(){
        // remove existing ScrollTriggers for a clean re-init
        ScrollTrigger.getAll().forEach(t => t.kill());

        document.querySelectorAll('.panel.scroll-col').forEach(panel => {
          const left = panel.querySelector('.col-left');
          const right = panel.querySelector('.col-right');

          // compute the scrollable height required: right content height
          const contentHeight = right.scrollHeight;

          // ensure the panel itself is tall enough to allow scrolling through the right column
          panel.style.height = (contentHeight + window.innerHeight * 0) + 'px';

          // pin the left column for the duration of the right column scroll
          ScrollTrigger.create({
            trigger: panel,
            start: 'top top',
            end: () => `+=${contentHeight}`,
            pin: left,
            pinSpacing: true,
            anticipatePin: 1,
          });
        });
        ScrollTrigger.refresh();
      }

      // run after load to ensure accurate measurements
      window.addEventListener('load', () => {
        setupScrollCols();
      });

      // recompute on resize (debounced)
      let rTO;
      window.addEventListener('resize', () => {
        clearTimeout(rTO);
        rTO = setTimeout(() => setupScrollCols(), 150);
      });
    </script>
  </body>
</html>
